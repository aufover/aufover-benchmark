.fedora: &fedora
    script:
        - sudo dnf update -y
        - sudo dnf install make -y
        - sudo dnf install dnf-plugins-core -y
        - sudo dnf copr enable lzaoral/Divine/ -y
        - sudo dnf copr enable acalabek/symbiotic/ -y
        - sudo dnf copr enable vmihalko/cbmc_utils/ -y
        - make install-deps
        - make configure
        - make check
    artifacts:
        paths:
            - "workdir/"
        expire_in: 1 month
        when: always
    tags:
        - docker

build_30:
    image: fedora:30
    <<: *fedora

build_31:
    image: fedora:30
    <<: *fedora
    
build_rawhide:
    image: fedora:rawhide
    <<: *fedora