#!/bin/bash

prune_output () {
	sed -e 's/address:[[:blank:]]\+[[:digit:]]\+:\?[[:digit:]]*/address:/g' -e 's/[[:blank:]\+]align[[:blank:]]\+[[:digit:]]\+//g' -e 's/[[:blank:]]*!dbg[[:blank:]]*![[:digit:]]\+//g' $1 
}
exec diff -up <(prune_output $1 | cssort ) <(prune_output $2 | cssort)
